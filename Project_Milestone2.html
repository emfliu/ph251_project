<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emily Liu &amp; Liza Lutzker">

<title>Project Milestone 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Project_Milestone2_files/libs/clipboard/clipboard.min.js"></script>
<script src="Project_Milestone2_files/libs/quarto-html/quarto.js"></script>
<script src="Project_Milestone2_files/libs/quarto-html/popper.min.js"></script>
<script src="Project_Milestone2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Project_Milestone2_files/libs/quarto-html/anchor.min.js"></script>
<link href="Project_Milestone2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Project_Milestone2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Project_Milestone2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Project_Milestone2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Project_Milestone2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project Milestone 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emily Liu &amp; Liza Lutzker </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="description-of-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="description-of-the-datasets">Description of the datasets</h2>
<section id="what-is-the-data-source-1-2-sentences-on-where-the-data-is-coming-from-dates-included-etc." class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-data-source-1-2-sentences-on-where-the-data-is-coming-from-dates-included-etc.">What is the data source? (1-2 sentences on where the data is coming from, dates included, etc.)</h3>
<ul>
<li><p>Dataset 1 (calenviroscreen_measures_2021.csv) contains multiple specific environmental measures and Dataset 2 (calenviroscreen_scores_demog_2021.csv) contains overall CalEnviroScreen (CES) scores and demographics. Both are from CalEnviroScreen, provide data at the census-tract level (accompanied by county of tract location), and use 2019 ACS estimates for demographics.&nbsp;</p></li>
<li><p>Dataset 3 (chhs_asthma_ed.csv) is from CA Health and Human Services Dept and has annual age-adjusted asthma ED visits/rates by county from 2015 through 2020.&nbsp;</p></li>
</ul>
</section>
<section id="how-does-the-dataset-relate-to-the-group-problem-statement-and-question" class="level3">
<h3 class="anchored" data-anchor-id="how-does-the-dataset-relate-to-the-group-problem-statement-and-question">How does the dataset relate to the group problem statement and question?</h3>
<p>Dataset 3 provides outcome data (acute asthma as defined by asthma ED visit). Dataset 1 provides the exposure data related to the “specific environmental measures” to be examined, while dataset 2 provides the exposure data for the “county CES measure” to be examined, as well as the population subgroups that might be important to stratify by.</p>
</section>
</section>
<section id="read-in-data-files" class="level1">
<h1>Read in Data files</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'

The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/rstudio/ph251_group_project"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#bring in files and clean up column names</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ed <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'./Project_Data_Sources/scenario_3/chhs_asthma_ed.csv'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>demog <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'./Project_Data_Sources/scenario_3/calenviroscreen_scores_demog_2021.csv'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>ces <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'./Project_Data_Sources/scenario_3/calenviroscreen_measures_2021.csv'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#take a look at columns in each file</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      county year           strata strata_name age_group number_of_ed_visits
1 CALIFORNIA 2015 Total population    All ages  All ages              191904
2    ALAMEDA 2015 Total population    All ages  All ages                9939
3     ALPINE 2015 Total population    All ages  All ages                   0
4     AMADOR 2015 Total population    All ages  All ages                 196
5      BUTTE 2015 Total population    All ages  All ages                1044
6  CALAVERAS 2015 Total population    All ages  All ages                 185
  age_adjusted_ed_visit_rate
1                       50.4
2                       64.3
3                        0.0
4                       58.4
5                       50.2
6                       48.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(demog)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  census_tract ces_4_0_score ces_4_0_percentile ces_4_0_percentile_range
1   6001400100      4.847988           2.798790     1-5% (lowest scores)
2   6001400200      4.882107           2.874433     1-5% (lowest scores)
3   6001400300     11.204244          15.935451                   15-20%
4   6001400400     12.390190          18.973777                   15-20%
5   6001400500     16.734731          29.740292                   25-30%
6   6001400600     20.024315          37.594554                   35-40%
  total_population children_10_years pop_10_64_years elderly_64_years hispanic
1             3120              7.82           66.12            26.06     3.78
2             2007             10.46           66.32            23.22     8.67
3             5051             11.42           73.04            15.54     6.95
4             4007              9.38           78.79            11.83    12.10
5             4124              9.12           81.96             8.92     9.46
6             1745              9.97           81.43             8.60     7.51
  white african_american native_american asian_american other_multiple
1 74.26             3.43            0.00          12.53           5.99
2 73.49             2.59            0.20           8.52           6.53
3 67.99             9.09            0.00          12.14           3.84
4 63.74             6.64            0.87          10.48           6.16
5 45.44            21.39            0.00          11.34          12.37
6 49.28            20.52            0.17          10.54          11.98
          county
1 Alameda County
2 Alameda County
3 Alameda County
4 Alameda County
5 Alameda County
6 Alameda County</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  census_tract california_county      ozone ozone_pctl    pm2_5 pm2_5_pctl
1   6019001100            Fresno 0.06031100   82.47666 13.90635   97.71002
2   6077000700       San Joaquin 0.04588368   44.97822 11.88408   72.59490
3   6037204920       Los Angeles 0.04791979   53.72744 12.25164   89.20971
4   6019000700            Fresno 0.06031100   82.47666 13.52094   95.88052
5   6019000200            Fresno 0.06031100   82.47666 13.81896   97.47355
6   6037542402       Los Angeles 0.04259906   29.89421 12.25258   89.22215
  diesel_pm diesel_pm_pctl drinking_water drinking_water_pctl     lead
1 1.1227118       98.71811       733.9469            84.38866 89.60085
2 0.5381054       91.15121       389.8466            41.55114 77.30227
3 0.7808326       96.55258       787.9403            92.53153 92.56366
4 0.1738153       57.08774       733.9469            84.38866 68.38508
5 1.3896581       99.30305       733.9469            84.38866 75.41454
6 0.5197984       90.64095       459.7366            55.31410 91.08803
  lead_pctl pesticides pesticides_pctl tox_release tox_release_pctl   traffic
1  96.47133  1.0019247        42.89655    4859.095         92.19805 1037.0957
2  86.83050 63.1325743        73.65517     519.628         52.35059  856.3959
3  98.39950  0.0000000         0.00000    3682.693         87.73443 2522.6223
4  77.00063 44.5748736        71.58621    1630.343         74.93123  690.5022
5  85.11657 16.6254961        64.41379    1975.208         78.95724  909.6509
6  97.49212  0.4067027        36.06897   12491.996         98.36209 1480.5210
  traffic_pctl cleanup_sites cleanup_sites_pctl groundwater_threats
1      60.3750         70.50           98.18962               54.25
2      48.2875         61.90           97.46174               78.60
3      92.8375         38.75           92.96379               20.50
4      35.2750         16.50           77.32363                9.50
5      52.2625         10.50           62.44867               28.25
6      77.6625         19.40           81.29899               53.30
  groundwater_threats_pctl haz_waste haz_waste_pctl imp_water_bodies
1                 91.16719      3.10       96.30708                0
2                 95.08551      1.27       88.57710               13
3                 68.91914     11.62       99.65586                7
4                 44.82816      2.36       94.12310                0
5                 78.05081      0.35       56.39974                0
6                 91.00116      2.72       95.34083               10
  imp_water_bodies_pctl solid_waste solid_waste_pctl pollution_burden
1               0.00000        6.00         79.95418         78.97740
2              91.87316        9.25         89.27835         73.43499
3              66.73667        4.85         73.08133         77.67318
4               0.00000        5.75         78.14433         67.84684
5               0.00000        0.00          0.00000         66.82595
6              82.96934        5.50         77.61741         76.43661
  pollution_burden_score pollution_burden_pctl asthma asthma_pctl
1               9.643125              99.92533 129.54    97.22084
2               8.966398              99.29060 105.88    94.21735
3               9.483880              99.86310  76.10    82.76421
4               8.284085              97.39888 139.45    98.24277
5               8.159435              96.93839 139.08    98.16800
6               9.332895              99.77598  86.77    88.59671
  low_birth_weight low_birth_weight_pctl cardiovascular_disease
1             7.80              95.62484                  21.47
2             6.88              88.72209                  20.26
3             7.11              90.89043                  20.87
4            10.65              99.78188                  22.68
5            10.25              99.66641                  22.64
6             6.28              80.03593                  22.20
  cardiovascular_disease_pctl education education_pctl linguistic_isolation
1                    92.24826      44.5       93.22956                 16.0
2                    88.12313      46.4       94.46975                 29.7
3                    90.15454      52.2       97.39307                 17.1
4                    94.56630      41.4       90.93900                 15.7
5                    94.42921      43.6       92.57150                 20.0
6                    93.66899      33.1       83.57378                   NA
  linguistic_isolation_pctl poverty poverty_pctl unemployment unemployment_pctl
1                  79.37475    76.0     98.91960         12.8          93.83134
2                  95.53390    73.2     98.39196         19.8          99.20614
3                  81.55366    62.6     93.39196          6.4          61.53045
4                  78.71160    65.7     95.35176         15.7          97.34513
5                  86.56110    72.7     98.30402         13.7          95.28891
6                        NA    43.5     74.04523          9.3          83.22488
  housing_burden housing_burden_pctl pop_char pop_char_score pop_char_pctl
1           30.3            91.03929 93.15511       9.663213      99.72264
2           31.2            92.28137 93.16541       9.664281      99.73525
3           20.3            63.96705 83.75181       8.687785      95.78921
4           35.4            96.41318 94.64123       9.817371      99.88654
5           32.7            94.15716 95.39887       9.895964      99.94957
6           23.7            76.34981 83.36615       8.647779      95.46142</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#get a sense of numeric variables in each file</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    county               year         strata          strata_name       
 Length:4484        Min.   :2015   Length:4484        Length:4484       
 Class :character   1st Qu.:2016   Class :character   Class :character  
 Mode  :character   Median :2018   Mode  :character   Mode  :character  
                    Mean   :2018                                        
                    3rd Qu.:2019                                        
                    Max.   :2020                                        
                                                                        
  age_group         number_of_ed_visits age_adjusted_ed_visit_rate
 Length:4484        Min.   :     0.0    Min.   :   0.00           
 Class :character   1st Qu.:    43.5    1st Qu.:  24.88           
 Mode  :character   Median :   191.0    Median :  40.20           
                    Mean   :  2013.5    Mean   :  51.40           
                    3rd Qu.:   852.0    3rd Qu.:  61.70           
                    Max.   :191904.0    Max.   :3531.00           
                    NA's   :681         NA's   :716               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(demog)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  census_tract       ces_4_0_score    ces_4_0_percentile 
 Min.   :6.001e+09   Min.   : 1.034   Min.   :  0.01261  
 1st Qu.:6.037e+09   1st Qu.:14.787   1st Qu.: 25.00946  
 Median :6.059e+09   Median :25.554   Median : 50.00630  
 Mean   :6.055e+09   Mean   :28.324   Mean   : 50.00630  
 3rd Qu.:6.073e+09   3rd Qu.:40.057   3rd Qu.: 75.00315  
 Max.   :6.115e+09   Max.   :93.184   Max.   :100.00000  
                     NA's   :103      NA's   :103        
 ces_4_0_percentile_range total_population children_10_years pop_10_64_years 
 Length:8035              Min.   :    0    Min.   : 0.00     Min.   :  0.00  
 Class :character         1st Qu.: 3470    1st Qu.: 9.28     1st Qu.: 69.99  
 Mode  :character         Median : 4615    Median :11.96     Median : 73.64  
                          Mean   : 4889    Mean   :12.06     Mean   : 73.13  
                          3rd Qu.: 5931    3rd Qu.:14.78     3rd Qu.: 76.84  
                          Max.   :38754    Max.   :51.47     Max.   :100.00  
                                           NA's   :23        NA's   :23      
 elderly_64_years     hispanic          white        african_american 
 Min.   :  0.000   Min.   :  0.00   Min.   :  0.00   Min.   : 0.0000  
 1st Qu.:  9.508   1st Qu.: 15.67   1st Qu.: 14.73   1st Qu.: 0.8375  
 Median : 13.340   Median : 30.93   Median : 37.26   Median : 2.5700  
 Mean   : 14.802   Mean   : 38.09   Mean   : 38.68   Mean   : 5.5669  
 3rd Qu.: 18.320   3rd Qu.: 58.17   3rd Qu.: 61.00   3rd Qu.: 6.6500  
 Max.   :100.000   Max.   :100.00   Max.   :100.00   Max.   :84.7100  
 NA's   :23        NA's   :23       NA's   :23       NA's   :23       
 native_american    asian_american   other_multiple      county         
 Min.   :  0.0000   Min.   : 0.000   Min.   : 0.000   Length:8035       
 1st Qu.:  0.0000   1st Qu.: 3.237   1st Qu.: 1.397   Class :character  
 Median :  0.0000   Median : 8.435   Median : 2.850   Mode  :character  
 Mean   :  0.4187   Mean   :13.985   Mean   : 3.268                     
 3rd Qu.:  0.3600   3rd Qu.:18.500   3rd Qu.: 4.700                     
 Max.   :100.0000   Max.   :94.550   Max.   :17.070                     
 NA's   :23         NA's   :23       NA's   :23                         </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  census_tract       california_county      ozone           ozone_pctl      
 Min.   :6.001e+09   Length:8035        Min.   :0.02655   Min.   :  0.1867  
 1st Qu.:6.037e+09   Class :character   1st Qu.:0.04193   1st Qu.: 26.6957  
 Median :6.059e+09   Mode  :character   Median :0.04716   Median : 50.5414  
 Mean   :6.055e+09                      Mean   :0.04867   Mean   : 50.9014  
 3rd Qu.:6.073e+09                      3rd Qu.:0.05680   3rd Qu.: 75.1213  
 Max.   :6.115e+09                      Max.   :0.07313   Max.   :100.0000  
                                                                            
     pm2_5          pm2_5_pctl          diesel_pm         diesel_pm_pctl     
 Min.   : 1.875   Min.   :  0.01245   Min.   : 0.000052   Min.   :  0.01245  
 1st Qu.: 8.575   1st Qu.: 25.00933   1st Qu.: 0.067683   1st Qu.: 25.00933  
 Median :10.119   Median : 50.00622   Median : 0.144929   Median : 50.00622  
 Mean   :10.153   Mean   : 50.00773   Mean   : 0.225442   Mean   : 50.00625  
 3rd Qu.:11.938   3rd Qu.: 75.00311   3rd Qu.: 0.286794   3rd Qu.: 75.00311  
 Max.   :16.395   Max.   :100.00000   Max.   :14.611221   Max.   :100.00000  
                                                                             
 drinking_water    drinking_water_pctl      lead         lead_pctl     
 Min.   :  32.57   Min.   :  0.09991   Min.   : 0.00   Min.   :  0.00  
 1st Qu.: 303.95   1st Qu.: 25.00937   1st Qu.:30.85   1st Qu.: 24.97  
 Median : 430.43   Median : 50.16860   Median :48.91   Median : 49.98  
 Mean   : 476.92   Mean   : 50.41066   Mean   :48.97   Mean   : 49.98  
 3rd Qu.: 678.37   3rd Qu.: 75.13426   3rd Qu.:66.71   3rd Qu.: 74.99  
 Max.   :1257.75   Max.   :100.00000   Max.   :99.35   Max.   :100.00  
 NA's   :28        NA's   :28          NA's   :96      NA's   :96      
   pesticides       pesticides_pctl   tox_release      tox_release_pctl
 Min.   :    0.00   Min.   :  0.00   Min.   :    0.0   Min.   :  0.00  
 1st Qu.:    0.00   1st Qu.:  0.00   1st Qu.:  111.5   1st Qu.: 24.66  
 Median :    0.00   Median :  0.00   Median :  456.3   Median : 49.77  
 Mean   :  268.49   Mean   : 18.05   Mean   : 1624.0   Mean   : 49.78  
 3rd Qu.:    0.19   3rd Qu.: 30.74   3rd Qu.: 1625.5   3rd Qu.: 74.89  
 Max.   :80811.09   Max.   :100.00   Max.   :96985.6   Max.   :100.00  
                                                                       
    traffic          traffic_pctl      cleanup_sites     cleanup_sites_pctl
 Min.   :   20.75   Min.   :  0.0125   Min.   :  0.000   Min.   :  0.00    
 1st Qu.:  553.80   1st Qu.: 25.0094   1st Qu.:  0.000   1st Qu.:  0.00    
 Median :  881.04   Median : 50.0063   Median :  2.000   Median : 25.63    
 Mean   : 1117.45   Mean   : 50.0063   Mean   :  8.579   Mean   : 33.73    
 3rd Qu.: 1386.57   3rd Qu.: 75.0031   3rd Qu.: 10.675   3rd Qu.: 62.59    
 Max.   :45752.00   Max.   :100.0000   Max.   :300.950   Max.   :100.00    
 NA's   :35         NA's   :35                                             
 groundwater_threats groundwater_threats_pctl   haz_waste      
 Min.   :  0.00      Min.   :  0.00           Min.   : 0.0000  
 1st Qu.:  0.00      1st Qu.:  0.00           1st Qu.: 0.1200  
 Median :  6.00      Median : 35.02           Median : 0.2850  
 Mean   : 16.74      Mean   : 37.84           Mean   : 0.6664  
 3rd Qu.: 19.00      3rd Qu.: 66.88           3rd Qu.: 0.5750  
 Max.   :673.75      Max.   :100.00           Max.   :27.9250  
                                                               
 haz_waste_pctl   imp_water_bodies imp_water_bodies_pctl  solid_waste    
 Min.   :  0.00   Min.   : 0.000   Min.   :  0.00        Min.   : 0.000  
 1st Qu.: 20.32   1st Qu.: 0.000   1st Qu.:  0.00        1st Qu.: 0.000  
 Median : 47.41   Median : 2.000   Median : 23.88        Median : 0.200  
 Mean   : 47.51   Mean   : 3.797   Mean   : 31.96        Mean   : 2.095  
 3rd Qu.: 73.47   3rd Qu.: 6.000   3rd Qu.: 58.69        3rd Qu.: 2.200  
 Max.   :100.00   Max.   :37.000   Max.   :100.00        Max.   :64.250  
                                                                         
 solid_waste_pctl  pollution_burden pollution_burden_score
 Min.   :  0.000   Min.   : 4.582   Min.   : 0.5595       
 1st Qu.:  0.000   1st Qu.:33.316   1st Qu.: 4.0679       
 Median :  9.668   Median :42.500   Median : 5.1893       
 Mean   : 28.075   Mean   :42.691   Mean   : 5.2125       
 3rd Qu.: 54.845   3rd Qu.:51.765   3rd Qu.: 6.3205       
 Max.   :100.000   Max.   :81.900   Max.   :10.0000       
                                                          
 pollution_burden_pctl     asthma        asthma_pctl        low_birth_weight
 Min.   :  0.01245     Min.   :  4.28   Min.   :  0.01246   Min.   : 0.000  
 1st Qu.: 25.00933     1st Qu.: 30.06   1st Qu.: 25.02804   1st Qu.: 3.930  
 Median : 50.00622     Median : 45.71   Median : 50.01246   Median : 4.915  
 Mean   : 50.00622     Mean   : 51.98   Mean   : 50.02060   Mean   : 5.003  
 3rd Qu.: 75.00311     3rd Qu.: 65.80   3rd Qu.: 75.01246   3rd Qu.: 6.000  
 Max.   :100.00000     Max.   :243.29   Max.   :100.00000   Max.   :13.710  
                       NA's   :11       NA's   :11          NA's   :227     
 low_birth_weight_pctl cardiovascular_disease cardiovascular_disease_pctl
 Min.   :  0.00        Min.   : 2.86          Min.   :  0.01246          
 1st Qu.: 24.99        1st Qu.: 9.45          1st Qu.: 25.07478          
 Median : 50.05        Median :12.42          Median : 50.02493          
 Mean   : 50.01        Mean   :13.41          Mean   : 50.04443          
 3rd Qu.: 75.12        3rd Qu.:16.75          3rd Qu.: 75.02493          
 Max.   :100.00        Max.   :40.85          Max.   :100.00000          
 NA's   :227           NA's   :11             NA's   :11                 
   education    education_pctl   linguistic_isolation linguistic_isolation_pctl
 Min.   : 0.0   Min.   :  0.00   Min.   :  0.000      Min.   :  0.00           
 1st Qu.: 5.8   1st Qu.: 25.06   1st Qu.:  2.800      1st Qu.: 22.17           
 Median :12.7   Median : 49.97   Median :  6.900      Median : 48.19           
 Mean   :17.5   Mean   : 49.96   Mean   :  9.732      Mean   : 48.13           
 3rd Qu.:26.0   3rd Qu.: 74.96   3rd Qu.: 13.900      3rd Qu.: 74.10           
 Max.   :76.3   Max.   :100.00   Max.   :100.000      Max.   :100.00           
 NA's   :103    NA's   :103      NA's   :320          NA's   :320              
    poverty       poverty_pctl        unemployment    unemployment_pctl
 Min.   : 1.00   Min.   :  0.01256   Min.   : 0.000   Min.   :  0.00   
 1st Qu.:16.30   1st Qu.: 25.25126   1st Qu.: 3.600   1st Qu.: 25.23   
 Median :27.70   Median : 50.01256   Median : 5.500   Median : 51.26   
 Mean   :31.34   Mean   : 50.08919   Mean   : 6.277   Mean   : 50.37   
 3rd Qu.:44.30   3rd Qu.: 75.11307   3rd Qu.: 8.000   3rd Qu.: 75.38   
 Max.   :96.70   Max.   :100.00000   Max.   :43.900   Max.   :100.00   
 NA's   :75      NA's   :75          NA's   :335      NA's   :335      
 housing_burden  housing_burden_pctl    pop_char      pop_char_score   
 Min.   : 0.80   Min.   :  0.01267   Min.   : 3.241   Min.   : 0.3362  
 1st Qu.:12.40   1st Qu.: 25.32319   1st Qu.:33.463   1st Qu.: 3.4712  
 Median :17.20   Median : 50.26616   Median :49.815   Median : 5.1675  
 Mean   :18.49   Mean   : 50.19031   Mean   :49.855   Mean   : 5.1716  
 3rd Qu.:23.30   3rd Qu.: 75.10773   3rd Qu.:66.421   3rd Qu.: 6.8900  
 Max.   :78.20   Max.   :100.00000   Max.   :96.402   Max.   :10.0000  
 NA's   :145     NA's   :145         NA's   :103      NA's   :103      
 pop_char_pctl      
 Min.   :  0.01261  
 1st Qu.: 25.00946  
 Median : 50.00630  
 Mean   : 50.00630  
 3rd Qu.: 75.00315  
 Max.   :100.00000  
 NA's   :103        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#take a look at county names more closely as we need to merge with them and they must be consistent across files</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ed) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   4484 obs. of  7 variables:
 $ county                    : chr  "CALIFORNIA" "ALAMEDA" "ALPINE" "AMADOR" ...
 $ year                      : int  2015 2015 2015 2015 2015 2015 2015 2015 2015 2015 ...
 $ strata                    : chr  "Total population" "Total population" "Total population" "Total population" ...
 $ strata_name               : chr  "All ages" "All ages" "All ages" "All ages" ...
 $ age_group                 : chr  "All ages" "All ages" "All ages" "All ages" ...
 $ number_of_ed_visits       : int  191904 9939 0 196 1044 185 97 6858 140 592 ...
 $ age_adjusted_ed_visit_rate: num  50.4 64.3 0 58.4 50.2 48 41.4 65.2 53 36.4 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ed<span class="sc">$</span>county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ALAMEDA"         "ALPINE"          "AMADOR"          "BUTTE"          
 [5] "CALAVERAS"       "CALIFORNIA"      "COLUSA"          "CONTRA COSTA"   
 [9] "DEL NORTE"       "EL DORADO"       "FRESNO"          "GLENN"          
[13] "HUMBOLDT"        "IMPERIAL"        "INYO"            "KERN"           
[17] "KINGS"           "LAKE"            "LASSEN"          "LOS ANGELES"    
[21] "MADERA"          "MARIN"           "MARIPOSA"        "MENDOCINO"      
[25] "MERCED"          "MODOC"           "MONO"            "MONTEREY"       
[29] "NAPA"            "NEVADA"          "ORANGE"          "PLACER"         
[33] "PLUMAS"          "RIVERSIDE"       "SACRAMENTO"      "SAN BENITO"     
[37] "SAN BERNARDINO"  "SAN DIEGO"       "SAN FRANCISCO"   "SAN JOAQUIN"    
[41] "SAN LUIS OBISPO" "SAN MATEO"       "SANTA BARBARA"   "SANTA CLARA"    
[45] "SANTA CRUZ"      "SHASTA"          "SIERRA"          "SISKIYOU"       
[49] "SOLANO"          "SONOMA"          "STANISLAUS"      "SUTTER"         
[53] "TEHAMA"          "TRINITY"         "TULARE"          "TUOLUMNE"       
[57] "VENTURA"         "YOLO"            "YUBA"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(demog) <span class="co">#note: county names here are Sentence Case while in ed file they are CAPITALIZED</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   8035 obs. of  15 variables:
 $ census_tract            : num  6e+09 6e+09 6e+09 6e+09 6e+09 ...
 $ ces_4_0_score           : num  4.85 4.88 11.2 12.39 16.73 ...
 $ ces_4_0_percentile      : num  2.8 2.87 15.94 18.97 29.74 ...
 $ ces_4_0_percentile_range: chr  "1-5% (lowest scores)" "1-5% (lowest scores)" "15-20%" "15-20%" ...
 $ total_population        : int  3120 2007 5051 4007 4124 1745 5128 4069 2471 6133 ...
 $ children_10_years       : num  7.82 10.46 11.42 9.38 9.12 ...
 $ pop_10_64_years         : num  66.1 66.3 73 78.8 82 ...
 $ elderly_64_years        : num  26.06 23.22 15.54 11.83 8.92 ...
 $ hispanic                : num  3.78 8.67 6.95 12.1 9.46 ...
 $ white                   : num  74.3 73.5 68 63.7 45.4 ...
 $ african_american        : num  3.43 2.59 9.09 6.64 21.39 ...
 $ native_american         : num  0 0.2 0 0.87 0 0.17 0 0.2 2.47 0 ...
 $ asian_american          : num  12.53 8.52 12.14 10.48 11.34 ...
 $ other_multiple          : num  5.99 6.53 3.84 6.16 12.37 ...
 $ county                  : chr  "Alameda County" "Alameda County" "Alameda County" "Alameda County" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Also, in demog, they contain the word "County" while not in ed, and no "CALIFORNIA" in demog</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(demog<span class="sc">$</span>county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Alameda County"         "Alpine County"          "Amador County"         
 [4] "Butte County"           "Calaveras County"       "Colusa County"         
 [7] "Contra Costa County"    "Del Norte County"       "El Dorado County"      
[10] "Fresno County"          "Glenn County"           "Humboldt County"       
[13] "Imperial County"        "Inyo County"            "Kern County"           
[16] "Kings County"           "Lake County"            "Lassen County"         
[19] "Los Angeles County"     "Madera County"          "Marin County"          
[22] "Mariposa County"        "Mendocino County"       "Merced County"         
[25] "Modoc County"           "Mono County"            "Monterey County"       
[28] "Napa County"            "Nevada County"          "Orange County"         
[31] "Placer County"          "Plumas County"          "Riverside County"      
[34] "Sacramento County"      "San Benito County"      "San Bernardino County" 
[37] "San Diego County"       "San Francisco County"   "San Joaquin County"    
[40] "San Luis Obispo County" "San Mateo County"       "Santa Barbara County"  
[43] "Santa Clara County"     "Santa Cruz County"      "Shasta County"         
[46] "Sierra County"          "Siskiyou County"        "Solano County"         
[49] "Sonoma County"          "Stanislaus County"      "Sutter County"         
[52] "Tehama County"          "Trinity County"         "Tulare County"         
[55] "Tuolumne County"        "Ventura County"         "Yolo County"           
[58] "Yuba County"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ces) <span class="co">#here, county is just Capital of county name name, no "County" and variable is named "california_county"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   8035 obs. of  50 variables:
 $ census_tract               : num  6.02e+09 6.08e+09 6.04e+09 6.02e+09 6.02e+09 ...
 $ california_county          : chr  "Fresno" "San Joaquin" "Los Angeles" "Fresno" ...
 $ ozone                      : num  0.0603 0.0459 0.0479 0.0603 0.0603 ...
 $ ozone_pctl                 : num  82.5 45 53.7 82.5 82.5 ...
 $ pm2_5                      : num  13.9 11.9 12.3 13.5 13.8 ...
 $ pm2_5_pctl                 : num  97.7 72.6 89.2 95.9 97.5 ...
 $ diesel_pm                  : num  1.123 0.538 0.781 0.174 1.39 ...
 $ diesel_pm_pctl             : num  98.7 91.2 96.6 57.1 99.3 ...
 $ drinking_water             : num  734 390 788 734 734 ...
 $ drinking_water_pctl        : num  84.4 41.6 92.5 84.4 84.4 ...
 $ lead                       : num  89.6 77.3 92.6 68.4 75.4 ...
 $ lead_pctl                  : num  96.5 86.8 98.4 77 85.1 ...
 $ pesticides                 : num  1 63.1 0 44.6 16.6 ...
 $ pesticides_pctl            : num  42.9 73.7 0 71.6 64.4 ...
 $ tox_release                : num  4859 520 3683 1630 1975 ...
 $ tox_release_pctl           : num  92.2 52.4 87.7 74.9 79 ...
 $ traffic                    : num  1037 856 2523 691 910 ...
 $ traffic_pctl               : num  60.4 48.3 92.8 35.3 52.3 ...
 $ cleanup_sites              : num  70.5 61.9 38.8 16.5 10.5 ...
 $ cleanup_sites_pctl         : num  98.2 97.5 93 77.3 62.4 ...
 $ groundwater_threats        : num  54.2 78.6 20.5 9.5 28.2 ...
 $ groundwater_threats_pctl   : num  91.2 95.1 68.9 44.8 78.1 ...
 $ haz_waste                  : num  3.1 1.27 11.62 2.36 0.35 ...
 $ haz_waste_pctl             : num  96.3 88.6 99.7 94.1 56.4 ...
 $ imp_water_bodies           : int  0 13 7 0 0 10 0 7 0 2 ...
 $ imp_water_bodies_pctl      : num  0 91.9 66.7 0 0 ...
 $ solid_waste                : num  6 9.25 4.85 5.75 0 5.5 5 1.7 7 9 ...
 $ solid_waste_pctl           : num  80 89.3 73.1 78.1 0 ...
 $ pollution_burden           : num  79 73.4 77.7 67.8 66.8 ...
 $ pollution_burden_score     : num  9.64 8.97 9.48 8.28 8.16 ...
 $ pollution_burden_pctl      : num  99.9 99.3 99.9 97.4 96.9 ...
 $ asthma                     : num  129.5 105.9 76.1 139.4 139.1 ...
 $ asthma_pctl                : num  97.2 94.2 82.8 98.2 98.2 ...
 $ low_birth_weight           : num  7.8 6.88 7.11 10.65 10.25 ...
 $ low_birth_weight_pctl      : num  95.6 88.7 90.9 99.8 99.7 ...
 $ cardiovascular_disease     : num  21.5 20.3 20.9 22.7 22.6 ...
 $ cardiovascular_disease_pctl: num  92.2 88.1 90.2 94.6 94.4 ...
 $ education                  : num  44.5 46.4 52.2 41.4 43.6 33.1 44.2 43.3 52.4 48.6 ...
 $ education_pctl             : num  93.2 94.5 97.4 90.9 92.6 ...
 $ linguistic_isolation       : num  16 29.7 17.1 15.7 20 NA 21.7 9.7 22.4 24 ...
 $ linguistic_isolation_pctl  : num  79.4 95.5 81.6 78.7 86.6 ...
 $ poverty                    : num  76 73.2 62.6 65.7 72.7 43.5 79.5 56.8 72.2 78.8 ...
 $ poverty_pctl               : num  98.9 98.4 93.4 95.4 98.3 ...
 $ unemployment               : num  12.8 19.8 6.4 15.7 13.7 9.3 15.4 12.6 16.3 14.6 ...
 $ unemployment_pctl          : num  93.8 99.2 61.5 97.3 95.3 ...
 $ housing_burden             : num  30.3 31.2 20.3 35.4 32.7 23.7 33.3 29.6 30.8 33.1 ...
 $ housing_burden_pctl        : num  91 92.3 64 96.4 94.2 ...
 $ pop_char                   : num  93.2 93.2 83.8 94.6 95.4 ...
 $ pop_char_score             : num  9.66 9.66 8.69 9.82 9.9 ...
 $ pop_char_pctl              : num  99.7 99.7 95.8 99.9 99.9 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ces<span class="sc">$</span>california_county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Alameda"         "Alpine"          "Amador"          "Butte"          
 [5] "Calaveras"       "Colusa"          "Contra Costa"    "Del Norte"      
 [9] "El Dorado"       "Fresno"          "Glenn"           "Humboldt"       
[13] "Imperial"        "Inyo"            "Kern"            "Kings"          
[17] "Lake"            "Lassen"          "Los Angeles"     "Madera"         
[21] "Marin"           "Mariposa"        "Mendocino"       "Merced"         
[25] "Modoc"           "Mono"            "Monterey"        "Napa"           
[29] "Nevada"          "Orange"          "Placer"          "Plumas"         
[33] "Riverside"       "Sacramento"      "San Benito"      "San Bernardino" 
[37] "San Diego"       "San Francisco"   "San Joaquin"     "San Luis Obispo"
[41] "San Mateo"       "Santa Barbara"   "Santa Clara"     "Santa Cruz"     
[45] "Shasta"          "Sierra"          "Siskiyou"        "Solano"         
[49] "Sonoma"          "Stanislaus"      "Sutter"          "Tehama"         
[53] "Trinity"         "Tulare"          "Tuolumne"        "Ventura"        
[57] "Yolo"            "Yuba"           </code></pre>
</div>
</div>
</section>
<section id="examining-data-elements" class="level1">
<h1>Examining Data Elements</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Identify 5+ data elements required for your specified scenario. Determine the types and the desired type/format for each variable</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Provide basic description of these 5+ elements (summary stats)</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#We'll look at: 1) demog$ces_4_0_score, 2) county (demog$county, ed$county, ces$california_county, 3) ed$age_adjusted_ed_visit_rate, 4) ed$year, 5) ces$traffic, 6) ces$pm2_5</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#first look at class and type of these variables</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(demog<span class="sc">$</span>ces_4_0_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(demog<span class="sc">$</span>ces_4_0_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(demog<span class="sc">$</span>county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(demog<span class="sc">$</span>county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ed<span class="sc">$</span>county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ed<span class="sc">$</span>county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ces<span class="sc">$</span>california_county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ces<span class="sc">$</span>california_county)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ed<span class="sc">$</span>age_adjusted_ed_visit_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ed<span class="sc">$</span>age_adjusted_ed_visit_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ed<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ed<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ces<span class="sc">$</span>traffic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ces<span class="sc">$</span>traffic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ces<span class="sc">$</span>pm2_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ces<span class="sc">$</span>pm2_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#all measures above look like they are of appropriate type </span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co">#in some cases we may want to use year as categorical, but keep as numeric for now</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co">#now calcualte summary stats for all of the above</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="co">#county</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ed<span class="sc">$</span>county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ALAMEDA"         "ALPINE"          "AMADOR"          "BUTTE"          
 [5] "CALAVERAS"       "CALIFORNIA"      "COLUSA"          "CONTRA COSTA"   
 [9] "DEL NORTE"       "EL DORADO"       "FRESNO"          "GLENN"          
[13] "HUMBOLDT"        "IMPERIAL"        "INYO"            "KERN"           
[17] "KINGS"           "LAKE"            "LASSEN"          "LOS ANGELES"    
[21] "MADERA"          "MARIN"           "MARIPOSA"        "MENDOCINO"      
[25] "MERCED"          "MODOC"           "MONO"            "MONTEREY"       
[29] "NAPA"            "NEVADA"          "ORANGE"          "PLACER"         
[33] "PLUMAS"          "RIVERSIDE"       "SACRAMENTO"      "SAN BENITO"     
[37] "SAN BERNARDINO"  "SAN DIEGO"       "SAN FRANCISCO"   "SAN JOAQUIN"    
[41] "SAN LUIS OBISPO" "SAN MATEO"       "SANTA BARBARA"   "SANTA CLARA"    
[45] "SANTA CRUZ"      "SHASTA"          "SIERRA"          "SISKIYOU"       
[49] "SOLANO"          "SONOMA"          "STANISLAUS"      "SUTTER"         
[53] "TEHAMA"          "TRINITY"         "TULARE"          "TUOLUMNE"       
[57] "VENTURA"         "YOLO"            "YUBA"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(demog<span class="sc">$</span>county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Alameda County"         "Alpine County"          "Amador County"         
 [4] "Butte County"           "Calaveras County"       "Colusa County"         
 [7] "Contra Costa County"    "Del Norte County"       "El Dorado County"      
[10] "Fresno County"          "Glenn County"           "Humboldt County"       
[13] "Imperial County"        "Inyo County"            "Kern County"           
[16] "Kings County"           "Lake County"            "Lassen County"         
[19] "Los Angeles County"     "Madera County"          "Marin County"          
[22] "Mariposa County"        "Mendocino County"       "Merced County"         
[25] "Modoc County"           "Mono County"            "Monterey County"       
[28] "Napa County"            "Nevada County"          "Orange County"         
[31] "Placer County"          "Plumas County"          "Riverside County"      
[34] "Sacramento County"      "San Benito County"      "San Bernardino County" 
[37] "San Diego County"       "San Francisco County"   "San Joaquin County"    
[40] "San Luis Obispo County" "San Mateo County"       "Santa Barbara County"  
[43] "Santa Clara County"     "Santa Cruz County"      "Shasta County"         
[46] "Sierra County"          "Siskiyou County"        "Solano County"         
[49] "Sonoma County"          "Stanislaus County"      "Sutter County"         
[52] "Tehama County"          "Trinity County"         "Tulare County"         
[55] "Tuolumne County"        "Ventura County"         "Yolo County"           
[58] "Yuba County"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ces<span class="sc">$</span>california_county))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Alameda"         "Alpine"          "Amador"          "Butte"          
 [5] "Calaveras"       "Colusa"          "Contra Costa"    "Del Norte"      
 [9] "El Dorado"       "Fresno"          "Glenn"           "Humboldt"       
[13] "Imperial"        "Inyo"            "Kern"            "Kings"          
[17] "Lake"            "Lassen"          "Los Angeles"     "Madera"         
[21] "Marin"           "Mariposa"        "Mendocino"       "Merced"         
[25] "Modoc"           "Mono"            "Monterey"        "Napa"           
[29] "Nevada"          "Orange"          "Placer"          "Plumas"         
[33] "Riverside"       "Sacramento"      "San Benito"      "San Bernardino" 
[37] "San Diego"       "San Francisco"   "San Joaquin"     "San Luis Obispo"
[41] "San Mateo"       "Santa Barbara"   "Santa Clara"     "Santa Cruz"     
[45] "Shasta"          "Sierra"          "Siskiyou"        "Solano"         
[49] "Sonoma"          "Stanislaus"      "Sutter"          "Tehama"         
[53] "Trinity"         "Tulare"          "Tuolumne"        "Ventura"        
[57] "Yolo"            "Yuba"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">as.factor</span>(ed<span class="sc">$</span>county)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 59</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">as.factor</span>(demog<span class="sc">$</span>county)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 58</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">as.factor</span>(ces<span class="sc">$</span>california_county)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 58</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">#CES score</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(demog<span class="sc">$</span>ces_4_0_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  1.034  14.787  25.554  28.324  40.057  93.184     103 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ED visit rates</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ed<span class="sc">$</span>age_adjusted_ed_visit_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
   0.00   24.88   40.20   51.40   61.70 3531.00     716 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">#year of ED visit - look at as numeric but also as categorical</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ed<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2015    2016    2018    2018    2019    2020 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(ed<span class="sc">$</span>year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2015" "2016" "2017" "2018" "2019" "2020"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">#CES traffic measure (traffic density in vehicle-km per hour per road length)</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ces<span class="sc">$</span>traffic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max.     NA's 
   20.75   553.80   881.04  1117.45  1386.57 45752.00       35 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#CES PM 2.5 measure (annual mean PM 2.5)</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ces<span class="sc">$</span>pm2_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.875   8.575  10.119  10.153  11.938  16.395 </code></pre>
</div>
</div>
<section id="data-cleaning-that-will-be-needed" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-that-will-be-needed">Data Cleaning that will be needed</h2>
<ul>
<li><p>County variable names differ between data sets; need to ensure the same case and syntax.</p></li>
<li><p>Exposures: CES score and environmental measures can be operationalized as continuous but could consider quintiles or quartiles to make them more interpretable.</p></li>
<li><p>Outcome: ED visit rates can be operationalized as continuous but could also consider categorization to make it more interpretable.</p></li>
<li><p>Year of ED visit: We need to factor this variable.</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>